# Maintainer: Yunshan Yao <qimuzi@aliyun.com>
# Co-maintainer: 1ridic <i@8f.al>
pkgname=aliyunpan-odomu-bin
_appname=alixby
pkgver=3.24.71713
pkgrel=1
pkgdesc="binary of aliyunpan liupan1890 forked by odomu"
arch=("x86_64")
url="https://github.com/odomu/aliyunpan"
license=('custom')
depends=('pacman')
conflicts=("aliyunpan-gaozhangmin-bin")
source=(alixby-3.24.41217-linux-x64.pacman
        alixby.desktop
        app.asar)
sha256sums=('552bd1f0562868afb144718dce7a58ecb49fbe049c7569b129d0f03764bfa02e'
            '0535fce28ff22a20e919718c31d3e415600235a560a89fde34b62352ceeedf92'
            'd4f0bd1b6b8d1d62eb6b385ab3a85583ad2e59107ab2207d5c55e5dfabf2684d')

package() {
    mkdir "$pkgdir/opt"
    mv "${srcdir}/opt/阿里云盘小白羊" "${pkgdir}/opt/alixby"  # change dir to english
    # mv "${pkgdir}/usr/share/icons/hicolor/0x0/apps/alixby.png" "${pkgdir}/opt/alixby/" # move icon
    rm .MTREE .INSTALL .PKGINFO
    rm -rf "${pkgdir}/usr/share/"
    install -Dm644 "${srcdir}/${_appname}.desktop" "${pkgdir}/usr/share/applications/${_appname}.desktop"
    install -Dm644 "${srcdir}/app.asar" "${pkgdir}/opt/alixby/resources/app.asar"
    chmod 0755 "${pkgdir}/opt/alixby/alixby"
}
